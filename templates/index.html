<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mugic - Music Practice Feedback System</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ Mugic</h1>
            <p class="subtitle">AI-Powered Music Practice Feedback</p>
        </header>

        <main>
            <!-- Upload Section -->
            <section id="upload-section" class="section">
                <h2>Upload Sheet Music</h2>
                <div class="upload-area">
                    <input type="file" id="sheet-music-file" accept=".pdf" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('sheet-music-file').click()">
                        Choose PDF File
                    </button>
                    <p id="file-name" class="file-name"></p>
                    <button id="upload-btn" class="btn btn-success" style="display: none;">Upload & Analyze</button>
                </div>
                <div id="upload-status" class="status-message"></div>
            </section>

            <!-- Practice Section -->
            <section id="practice-section" class="section" style="display: none;">
                <h2>Practice Session</h2>
                
                <div class="piece-info">
                    <h3 id="current-piece-name">Current Piece</h3>
                    <p id="piece-details"></p>
                </div>

                <div class="settings">
                    <div class="setting-group">
                        <label for="instrument-select">Select Your Instrument:</label>
                        <select id="instrument-select" class="form-control">
                            <option value="">Loading instruments...</option>
                        </select>
                    </div>

                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="disable-dynamics">
                            Disable dynamics feedback (focus on notes and rhythm)
                        </label>
                    </div>
                </div>

                <div class="recording-controls">
                    <button id="start-recording-btn" class="btn btn-primary">
                        üé§ Start Recording
                    </button>
                    <button id="stop-recording-btn" class="btn btn-danger" style="display: none;">
                        ‚èπÔ∏è Stop Recording
                    </button>
                    <p id="recording-status"></p>
                </div>

                <div id="analysis-loading" class="loading" style="display: none;">
                    <p>üéº Analyzing your performance...</p>
                </div>
            </section>

            <!-- Feedback Section -->
            <section id="feedback-section" class="section" style="display: none;">
                <h2>Performance Feedback</h2>
                
                <div class="overall-score">
                    <h3>Overall Score</h3>
                    <div class="score-circle">
                        <span id="overall-score">0</span>
                        <span class="score-max">/100</span>
                    </div>
                    <p id="performance-summary"></p>
                </div>

                <div class="detailed-feedback">
                    <div class="feedback-card">
                        <h4>üéØ Pitch Accuracy</h4>
                        <div class="score-bar">
                            <div class="score-fill" id="pitch-score-bar"></div>
                        </div>
                        <p id="pitch-score"></p>
                        <div id="pitch-details"></div>
                    </div>

                    <div class="feedback-card">
                        <h4>ü•Å Rhythm</h4>
                        <div class="score-bar">
                            <div class="score-fill" id="rhythm-score-bar"></div>
                        </div>
                        <p id="rhythm-score"></p>
                        <div id="rhythm-details"></div>
                    </div>

                    <div class="feedback-card">
                        <h4>‚è±Ô∏è Tempo</h4>
                        <div class="score-bar">
                            <div class="score-fill" id="tempo-score-bar"></div>
                        </div>
                        <p id="tempo-score"></p>
                        <div id="tempo-details"></div>
                    </div>

                    <div class="feedback-card" id="dynamics-card">
                        <h4>üîä Dynamics</h4>
                        <div class="score-bar">
                            <div class="score-fill" id="dynamics-score-bar"></div>
                        </div>
                        <p id="dynamics-score"></p>
                        <div id="dynamics-details"></div>
                    </div>
                </div>

                <div class="recommendations">
                    <h3>üí° Recommendations</h3>
                    <ul id="recommendations-list"></ul>
                </div>

                <div class="comparison" id="comparison-section" style="display: none;">
                    <h3>üìä Comparison with Previous Attempts</h3>
                    <div id="comparison-content"></div>
                </div>

                <div class="actions">
                    <button id="practice-again-btn" class="btn btn-primary">
                        Practice Again
                    </button>
                    <button id="new-piece-btn" class="btn btn-secondary">
                        Upload New Piece
                    </button>
                </div>
            </section>

            <!-- Pieces Library -->
            <section id="library-section" class="section">
                <h2>Your Music Library</h2>
                <div id="pieces-list" class="pieces-grid">
                    <p class="empty-message">No pieces uploaded yet. Upload your first sheet music above!</p>
                </div>
            </section>
        </main>

        <footer>
            <p>Mugic - AI-Powered Music Practice Feedback System</p>
            <p class="small">Supports all concert band instruments with advanced noise filtration and sheet music analysis</p>
        </footer>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
